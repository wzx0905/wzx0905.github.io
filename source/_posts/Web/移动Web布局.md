---
title: 移动Web布局
date: 2021/8/16
categories:
 - [前端,Web]
---

### 流式布局（百分比布局）

- 流式布局，就是百分比布局，也称非固定像素布局
- 通过将盒子的宽度设置成百分比，从而根据屏幕的宽度来进行伸缩，不受固定像素的限制，内容向两侧填充
- 流式布局方式是移动web开发使用的比较常见

#### 注意事项

制作过程中，需要定义页面的最大和最小支持宽度

- `max-width` 最大宽度 （`max-height` 最大高度）
- `min-width` 最小宽度 （`min-height` 最小高度）

### `flex`布局

#### 传统布局与`flex`布局

- 传统布局
  - 兼容性好
  - 布局繁琐
  - 局限性，不能再移动端很好的布局

- `flex`布局
  - 操作方便，布局极为简单，移动端应用广泛
  - `PC`端浏览器支持情况较差
  - `IE11`或更低版本，不支持或仅部分支持
- 建议
  - 如果是`PC`端页面布局，考虑传统布局
  - 如果师移动端或者不考虑兼容性问题的`PC`端页面布局，我们还是使用`flex`弹性布局

#### `flex`布局原理

- 采用`Flex`布局的元素，称为`Flex`容器（`flex container`），简称“容器”。它的所有子元素自动称为容器成员，称为`Flex`项目（`flex item`），简称“项目”。
- 项目可以横向排列也可以纵向排列
- 通过给容器添加`flex`属性，来控制项目的位置和排列方式

#### `flex`布局常见属性

##### 父项常见属性

- `flex-direction`：设置主轴的方向

  - 主轴和侧轴

    - 在`flex`布局中，是分为主轴和侧轴两个方向，同样的叫法有：行和列、`x`轴和`y`轴
    - 默认主轴方向就是`x`轴方向，水平向右
    - 默认侧轴方向就是`y`轴方向，垂直向下

  - `flex-direction`属性决定主轴的方向（即项目的排列方向）

  - 注意：主轴和侧轴是会变化的，就看`flex-direction`设置谁为主轴，剩下的就是侧轴。而子元素是跟着主轴来排列的。

  - | 属性值           | 解释说明 |
    | ---------------- | -------- |
    | `row`（默认值）  | 从左到右 |
    | `row-reverse`    | 从右到左 |
    | `column`         | 从上到下 |
    | `column-reverse` | 从下到上 |

- `justify-content`：设置主轴上的子元素排列方式

  - `justify-content`属性定义了项目在主轴上的对齐方式

  - 注意：使用这个属性之前一定要确定好主轴是哪个

  - | 属性值                 | 解释说明                                     |
    | ---------------------- | -------------------------------------------- |
    | `flex-start`（默认值） | 从头部开始，如果主轴是`x`轴，则从左到右      |
    | `flex-end`             | 从尾部开始排列                               |
    | `center`               | 在主轴居中对齐（如果主轴是`x`轴则 水平居中） |
    | `space-around`         | 平分剩余空间                                 |
    | `space-between`        | 先两边贴边，再平分剩余空间（重要）           |

- `flex-wrap`：设置子元素是否换行

  - 默认情况下，项目都排列再一条线（又称“轴线”）上

  - `flex-wrap`属性定义，`flex`布局中默认是不换行的。

  - | 属性值             | 解释说明 |
    | ------------------ | -------- |
    | `nowrap`（默认值） | 不换行   |
    | `wrap`             | 换行     |

- `align-content`：设置侧轴上的子元素的排列方式（多行）

  - 设置子项在侧轴上的排列方式，并且只能用于子项出现`换行`的情况（多行），在单行下是没有效果的。

  - | 属性值              | 解释说明                               |
    | ------------------- | -------------------------------------- |
    | `flex-start`        | 在侧轴的头部开始排列                   |
    | `flex-end`          | 在侧轴的尾部开始排列                   |
    | `center`            | 在侧轴中间显示                         |
    | `space-around`      | 子项在侧轴平分剩余空间                 |
    | `space-between`     | 子项在侧轴先分布在两头，再平分剩余空间 |
    | `stretch`（默认值） | 设置子项元素高度平分父元素高度         |

- `align-items`：设置侧轴上的子元素排列方式（单行）

  - 该属性是控制子项再侧轴（默认是`y`轴）上的排列方式

  - 在子项为单项（单行）的时候使用

  - | 属性值              | 解释说明                 |
    | ------------------- | ------------------------ |
    | `flex-start`        | 从上到下                 |
    | `flex-end`          | 从下到上                 |
    | `center`            | 挤在一起居中（垂直居中） |
    | `stretch`（默认值） | 拉伸                     |

  - `align-items`和`align-content`区别

    - `align-items`适用于单行情况下，只有上对齐、下对齐、居中和拉伸
    - `align-content`适用于换行（多行）的情况下（单行情况下无效），可以设置上对齐、下对齐、居中、拉伸以及平均分配剩余空间等属性值。
    - 总结：单行找`align-items`，多行找`align-content`。

- `flex-flow`：复合属性，相当于同时设置了`flex-direction`和`flex-wrap`

  - `flex-flow`属性是`flex-direction`和`flex-wrap`属性的复合属性
  - `flex-flow: row nowrap;`

##### 子项常见属性

- `flex` 子项目占的份数
  - `flex`属性定义子项目分配父盒子的剩余空间，用`flex`来表示占多少份数
  - 属性值为数字，数字为1，表示占总份数中的1份。默认值为0。
- `align-self` 控制子项自己在侧轴的排列方式
  - `align-self` 属性允许单个项目有与其他项目不一样的对齐方式，可覆盖`align-items`属性。
  - 默认值为`auto`，表示继承父元素的`align-items`属性，如果没有父元素，则等同于`stretch`
- `order` 属性定义子项的排列顺序（前后顺序）
  - 数值越小，排列越靠前，默认为0。
  - 注意：和`z-index`不一样

### `rem`适配布局

#### `rem`单位

- `rem`（`root em`）是一个相对单位，类似于`em`，`em`是父元素字体大小。
- 不同的是`rem`的基准是相对于`<html>`元素的字体大小。
- 比如，根元素（`html`）设置`font-size=12px;`非根元素设置`width:2rem;`转换成`px`表示就是`24px`。
- `rem`的优势：父元素文字大小可能不一致，但是整个页面只有一个`<html>`，可以很好的来控制整个页面的元素大小比例。

#### 媒体查询

- 媒体查询（`Media Query`）是`CSS3`新语法。
  - 使用`@media`查询，可以针对不同的媒体类型定义不同的样式
  - `@media`可以针对不同的屏幕尺寸设置不同的样式
  - 当你重置浏览器大小的过程中，页面也会根据浏览器的宽度和高度重新渲染页面
  - 目前针对很多苹果手机、`Android`手机、平板等设备都用的到多媒体查询

- 语法规范
  - 用`@media`开头，注意`@`符号
  - `mediatype`媒体查询
  - 关键字 `and` `not` `only`
  - `media feature` 媒体特性，必须有小括号包含

- `mediatype`媒体查询

  - 将不同的终端设备划分成不同的类型，称为媒体类型

  - | 值       | 解释说明                           |
    | -------- | ---------------------------------- |
    | `all`    | 用于所有设备                       |
    | `print`  | 用于打印机和打印预览               |
    | `screen` | 用于电脑屏幕，平板电脑，智能手机等 |

- 关键字将媒体类型或多个媒体特性连接到一起作为媒体查询的条件。

  - `and`：可以将多个媒体特性连接到一起，相当于“且”的意思
  - `not`：排除某个媒体类型，相当于“非”的意思，可以省略
  - `or`：可以测试多个媒体查询的条件，只要有一个条件成立，就执行，“或”的意思
  - `only`：指定某个特定的媒体类型，可以省略。

- 媒体特性

  - 每种媒体类型都具有各自不同的特性，根据不同类型的媒体特性设置不同的展示风格

  - 这里只展示三个

    | 值          | 解释说明                           |
    | ----------- | ---------------------------------- |
    | `width`     | 定义输出设备中页面可见区域的宽度   |
    | `min-width` | 定义输出设备中页面最小可见区域宽度 |
    | `max-width` | 定义输出设备中页面最大可见区域宽度 |

- 媒体查询+`rem`实现元素动态大小变化
  - `rem`单位是跟着`<html>`来走的，有了`rem`页面元素可以设置不同大小尺寸
  - 媒体查询可以根据不同设备宽度来修改样式
  - 媒体查询+`rem`就可以实现不同设备宽度，实现页面元素大小的动态变化

#### 引入资源

- 当样式比较繁多的时候，我们可以针对不同的媒体使用不同的`stylesheets`（样式表）

- 原理，就是直接在`<link>`中判断设备的尺寸，然后引用不同的`css`文件。

- 语法规范

  - ```html
    <link rel="stylesheet" media="mediatype and|not|only (media feature)" href="mystylesheet.css">
    ```

- `rem`适配方案

  - `rem`实际开发适配方案

    - 按照设计稿与设备宽度的比例，动态计算并设置`html`根标签`font-size`大小；（媒体查询）
    - `CSS`中，设计稿元素的宽、高、相对位置等取值，按照同等比例换算为`rem`为单位的值。

  - `rem`适配方案技术使用（市场主流）

    - 技术方案1

      - `less`
      - 媒体查询
      - `rem`

    - 技术方案2

      - `flexble.js`
      - `rem`

    - 总结

      - 两种方案现在都存在
      - 方案2更简单

    - 技术方案1实际开发

      - 设计稿常见尺寸宽度

        ![](https://pic.imgdb.cn/item/617f8e6e2ab3f51d916bfd90.png)

        一般情况下，我们以一套或两套效果图适应大部分的屏幕，放弃极端屏或对其优雅降级，牺牲一些效果，`现在基本以750为准`。

      - 动态设置`html`标签`font-size`大小
        - 假设设计稿是`750px`
        - 假设我们把整个屏幕划分为15等份（划分标准不一，可以是20等份也可以是10等份）
        - 每一份作为`html`字体大小，这里就是`50px`
        - 那么在`320px`设备的时候，字体大小为320/15就是`21.33px`
        - 那我们页面元素的大小除以不同的`html`字体大小会发现他们比例还是相同的，比如我们以750为标准设计稿
          - 一个`100*100`像素的页面元素在750屏幕下，就是100/50转换为`rem`是`2rem*2rem`比例是1比1
          - 320屏幕下，`html`字体大小为21.33则`2rem=42.66px`，此时宽和高都是42.66但是宽和高的比例还是1比1
          - 但是已经能实现不同屏幕下页面元素盒子等比例缩放的效果
      - 元素大小取值方法
        - 最后的公式：页面元素的`rem`值=页面元素值（`px`）/（屏幕宽度/划分的份数）
        - 屏幕宽度/划分的份数就是`html font-size`的大小
        - 或者：页面元素的`rem`值=页面元素值（`px`）/`html font-size`字体大小

#### 响应式布局

- 响应式开发原理

  - 就是使用媒体查询针对不同宽度的设备进行布局和样式的设置，从而适配不同设备的目的。

  - | 设备划分                 | 尺寸区间            |
    | ------------------------ | ------------------- |
    | 超小屏幕（手机）         | `<768px`            |
    | 小屏设备（平板）         | `>=768px`~`<992px`  |
    | 中等屏幕（桌面显示器）   | `>=992px`~`<1200px` |
    | 宽屏设备（大桌面显示器） | `>=1200px`          |

- 响应式布局容器

  - 响应式需要一个父级作为布局容器，来配合子级元素来实现变化效果
  - 原理就是在不同屏幕下，通过媒体查询来改变这个布局容器的大小，再改变里面子元素的排列方式和大小，从而实现不同屏幕下，看到不同的页面布局和样式变化。
  - 平时我们的相应尺寸划分
    - 超小屏幕（手机，小于`768px`）：设置宽度为`100%`
    - 小屏幕（平板，大于等于`768px`）：设置宽度为`750px`
    - 中等屏幕（桌面显示器，大于等于`992px`）：设置宽度为`970px`
    - 大屏幕（大桌面显示器，大于等于`1200px`）：设置宽度为`1170px`

### 总结

- 移动端技术选型
  - 流式布局（百分比布局）
  - `flex`弹性布局（推荐）
  - `rem`适配布局（推荐）
  - 响应式布局
- 建议：我们选取一种主要技术选型，其他技术作为辅助，这种混合技术开发
